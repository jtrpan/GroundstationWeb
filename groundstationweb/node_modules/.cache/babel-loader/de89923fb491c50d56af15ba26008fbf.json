{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\James Pan\\\\Desktop\\\\demo\\\\groundstationweb\\\\src\\\\components\\\\DataArea\\\\components\\\\LoggerArea.jsx\";\nimport React, { Component } from 'react';\nimport { Segment, Header, Button, Modal, Icon, Table } from \"semantic-ui-react\";\n\nclass LoggerArea extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      confirmationOpen: false,\n      exportModalOpen: false\n    };\n\n    this.download = (filename, text) => {\n      const pom = document.createElement('a');\n      pom.setAttribute('href', \"data:text/plain;charset=utf-8,\".concat(encodeURIComponent(text)));\n      pom.setAttribute('download', filename);\n\n      if (document.createEvent) {\n        const event = document.createEvent('MouseEvents');\n        event.initEvent('click', true, true);\n        pom.dispatchEvent(event);\n      } else {\n        pom.click();\n      }\n    };\n\n    this.saveDataLog = () => {\n      const dataLog = this.props.dataLog;\n      console.info(\"Saving\", dataLog.length, \"records\");\n      let csv = \"TimeSent, TimeRecieved, Latitude, Longitude, GPS Altitude (ft), Velocity (m/s), GPS Accuracy,\" + \"Payload Prediction (ft), Payload Target Lat, Payload Target Long, CDA Prediction (ft), CDA Target Lat,\" + \"CDA Target Long, cargoDropped, oneDropped, twoDropped,\";\n      dataLog.forEach(d => {\n        csv = \"\".concat(csv, \"\\n\").concat(d.timeSent, \", \").concat(d.timeRecieved, \", \").concat(d.latitude, \", \").concat(d.longitude, \", \").concat(d.altitude, \", \").concat(d.velocity, \", \").concat(d.accuracy, \",             \").concat(d.payloadPredictionDistance, \",\").concat(d.payloadLatLong[0], \", \").concat(d.payloadLatLong[1], \",\").concat(d.CDAPredictionDistance, \",\").concat(d.cdaLatLong[0], \",            \").concat(d.cdaLatLong[1], \",\").concat(d.cargoDropped, \",\").concat(d.oneDropped, \",\").concat(d.twoDropped);\n      });\n      this.download(\"Flight Log \".concat(new Date().toISOString(), \".csv\"), csv);\n    };\n  }\n\n  render() {\n    const _this$props = this.props,\n          saveLog = _this$props.saveLog,\n          clearLog = _this$props.clearLog,\n          dataLog = _this$props.dataLog;\n    const _this$state = this.state,\n          confirmationOpen = _this$state.confirmationOpen,\n          exportModalOpen = _this$state.exportModalOpen;\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, React.createElement(Segment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(Header, {\n      as: \"h5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, \"Log Data:\"), React.createElement(\"div\", {\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        margin: \"auto\",\n        width: \"max-content\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, React.createElement(Button, {\n      content: \"View Log\",\n      icon: \"eye\",\n      basic: true,\n      onClick: () => {\n        this.setState({\n          exportModalOpen: true\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }), React.createElement(Button, {\n      content: \"Clear Log\",\n      icon: \"cancel\",\n      negative: true,\n      basic: true,\n      onClick: () => {\n        this.setState({\n          confirmationOpen: true\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    })))), exportModalOpen && React.createElement(Modal, {\n      open: true,\n      size: \"large\",\n      onClose: () => {\n        this.setState({\n          exportModalOpen: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"View Log\"), React.createElement(Modal.Content, {\n      scrolling: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, dataLog.length > 0 ? React.createElement(Table, {\n      compact: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(Table.Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(Table.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Time\"), React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Altitude (ft)\"), React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"Velocity (m/s)\"), React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Latitude\"), React.createElement(Table.HeaderCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Longitude\"))), React.createElement(Table.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, dataLog.map(d => {\n      return React.createElement(Table.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Table.Cell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, d.timereceived), React.createElement(Table.Cell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, d.altitude), React.createElement(Table.Cell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, d.velocity), React.createElement(Table.Cell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, d.latitude), React.createElement(Table.Cell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, d.longitude));\n    }))) : React.createElement(\"span\", {\n      style: {\n        color: \"grey\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"There has been no data received\")), React.createElement(Modal.Actions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        float: \"left\"\n      },\n      content: \"Cancel\",\n      onClick: () => {\n        this.setState({\n          exportModalOpen: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(Button, {\n      style: {\n        float: \"left\"\n      },\n      negative: true,\n      disabled: dataLog.length === 0,\n      content: \"Clear Log\",\n      onClick: () => {\n        this.setState({\n          confirmationOpen: true\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(Button, {\n      disabled: dataLog.length === 0,\n      primary: true,\n      content: \"Export Log\",\n      onClick: () => {\n        this.saveDataLog();\n        this.setState({\n          exportModalOpen: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }))), confirmationOpen && React.createElement(Modal, {\n      open: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Are you sure you want to clear the flight log?\"), React.createElement(Modal.Content, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        padding: \"1em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"exclamation\",\n      size: \"big\",\n      color: \"red\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), \"This action cannot be undone.\")), React.createElement(Modal.Actions, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Button, {\n      content: \"Cancel\",\n      onClick: () => {\n        this.setState({\n          confirmationOpen: false\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(Button, {\n      negative: true,\n      content: \"Clear Log\",\n      onClick: () => {\n        this.setState({\n          confirmationOpen: false\n        });\n        clearLog();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default LoggerArea;","map":{"version":3,"sources":["C:/Users/James Pan/Desktop/demo/groundstationweb/src/components/DataArea/components/LoggerArea.jsx"],"names":["React","Component","Segment","Header","Button","Modal","Icon","Table","LoggerArea","state","confirmationOpen","exportModalOpen","download","filename","text","pom","document","createElement","setAttribute","encodeURIComponent","createEvent","event","initEvent","dispatchEvent","click","saveDataLog","dataLog","props","console","info","length","csv","forEach","d","timeSent","timeRecieved","latitude","longitude","altitude","velocity","accuracy","payloadPredictionDistance","payloadLatLong","CDAPredictionDistance","cdaLatLong","cargoDropped","oneDropped","twoDropped","Date","toISOString","render","saveLog","clearLog","width","margin","setState","map","timereceived","color","float","padding"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Segment, Header, Button, Modal, Icon, Table } from \"semantic-ui-react\";\r\n\r\nclass LoggerArea extends Component {\r\n  state = {\r\n    confirmationOpen: false,\r\n    exportModalOpen: false,\r\n  };\r\n\r\n  download = (filename, text) => {\r\n    const pom = document.createElement('a');\r\n    pom.setAttribute('href', `data:text/plain;charset=utf-8,${encodeURIComponent(text)}`);\r\n    pom.setAttribute('download', filename);\r\n\r\n    if (document.createEvent) {\r\n      const event = document.createEvent('MouseEvents');\r\n      event.initEvent('click', true, true);\r\n      pom.dispatchEvent(event);\r\n    } else {\r\n      pom.click();\r\n    }\r\n  };\r\n\r\n  saveDataLog = () => {\r\n    const { dataLog } = this.props;\r\n    console.info(\"Saving\", dataLog.length, \"records\");\r\n    let csv = \"TimeSent, TimeRecieved, Latitude, Longitude, GPS Altitude (ft), Velocity (m/s), GPS Accuracy,\"\r\n      + \"Payload Prediction (ft), Payload Target Lat, Payload Target Long, CDA Prediction (ft), CDA Target Lat,\"\r\n      +\"CDA Target Long, cargoDropped, oneDropped, twoDropped,\";\r\n    dataLog.forEach((d) => {\r\n      csv = `${csv}\\n${d.timeSent}, ${d.timeRecieved}, ${d.latitude}, ${d.longitude}, ${d.altitude}, ${d.velocity}, ${d.accuracy}, \\\r\n            ${d.payloadPredictionDistance},${d.payloadLatLong[0]}, ${d.payloadLatLong[1]},${d.CDAPredictionDistance},${d.cdaLatLong[0]},\\\r\n            ${d.cdaLatLong[1]},${d.cargoDropped},${d.oneDropped},${d.twoDropped}`;\r\n    });\r\n\r\n    this.download(`Flight Log ${new Date().toISOString()}.csv`, csv);\r\n  };\r\n\r\n  render() {\r\n    const { saveLog, clearLog, dataLog } = this.props;\r\n    const { confirmationOpen, exportModalOpen } = this.state;\r\n    return (\r\n      <React.Fragment>\r\n        <Segment>\r\n          <Header as=\"h5\">Log Data:</Header>\r\n          <div style={{ width: \"100%\" }}>\r\n            <div style={{ margin: \"auto\", width: \"max-content\" }}>\r\n              <Button content=\"View Log\" icon=\"eye\" basic onClick={() => { this.setState({ exportModalOpen: true }); }} />\r\n              <Button content=\"Clear Log\" icon=\"cancel\" negative basic onClick={() => { this.setState({ confirmationOpen: true }); }} />\r\n            </div>\r\n          </div>\r\n        </Segment>\r\n        {exportModalOpen && (\r\n          <Modal\r\n            open\r\n            size=\"large\"\r\n            onClose={() => { this.setState({ exportModalOpen: false }); }}\r\n          >\r\n            <Modal.Header>\r\n                  View Log\r\n            </Modal.Header>\r\n            <Modal.Content scrolling>\r\n              {dataLog.length > 0 ? (\r\n                <Table compact>\r\n                  <Table.Header>\r\n                    <Table.Row>\r\n                      <Table.HeaderCell>Time</Table.HeaderCell>\r\n                      <Table.HeaderCell>Altitude (ft)</Table.HeaderCell>\r\n                      <Table.HeaderCell>Velocity (m/s)</Table.HeaderCell>\r\n                      <Table.HeaderCell>Latitude</Table.HeaderCell>\r\n                      <Table.HeaderCell>Longitude</Table.HeaderCell>\r\n                    </Table.Row>\r\n                  </Table.Header>\r\n                  <Table.Body>\r\n                    {dataLog.map((d) => {\r\n                      return (\r\n                        <Table.Row>\r\n                          <Table.Cell>{d.timereceived}</Table.Cell>\r\n                          <Table.Cell>{d.altitude}</Table.Cell>\r\n                          <Table.Cell>{d.velocity}</Table.Cell>\r\n                          <Table.Cell>{d.latitude}</Table.Cell>\r\n                          <Table.Cell>{d.longitude}</Table.Cell>\r\n                        </Table.Row>\r\n                      );\r\n                    })}\r\n                  </Table.Body>\r\n                </Table>\r\n              ) : (\r\n                <span style={{ color: \"grey\" }}>\r\n                  There has been no data received\r\n                </span>\r\n              )}\r\n            </Modal.Content>\r\n            <Modal.Actions>\r\n              <Button\r\n                style={{ float: \"left\" }}\r\n                content=\"Cancel\"\r\n                onClick={() => { this.setState({ exportModalOpen: false }); }}\r\n              />\r\n              <Button\r\n                style={{ float: \"left\" }}\r\n                negative\r\n                disabled={dataLog.length === 0}\r\n                content=\"Clear Log\"\r\n                onClick={() => { this.setState({ confirmationOpen: true }); }}\r\n              />\r\n              <Button\r\n                disabled={dataLog.length === 0}\r\n                primary\r\n                content=\"Export Log\"\r\n                onClick={() => { this.saveDataLog(); this.setState({ exportModalOpen: false }); }}\r\n              />\r\n            </Modal.Actions>\r\n          </Modal>\r\n        )}\r\n        {confirmationOpen && (\r\n          <Modal open>\r\n            <Modal.Header>\r\n                  Are you sure you want to clear the flight log?\r\n            </Modal.Header>\r\n            <Modal.Content>\r\n              <div style={{ padding: \"1em\" }}>\r\n                <Icon name=\"exclamation\" size=\"big\" color=\"red\" />\r\n                    This action cannot be undone.\r\n              </div>\r\n            </Modal.Content>\r\n            <Modal.Actions>\r\n              <Button\r\n                content=\"Cancel\"\r\n                onClick={() => { this.setState({ confirmationOpen: false }); }}\r\n              />\r\n              <Button\r\n                negative\r\n                content=\"Clear Log\"\r\n                onClick={() => { this.setState({ confirmationOpen: false }); clearLog(); }}\r\n              />\r\n            </Modal.Actions>\r\n          </Modal>\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoggerArea;\r\n"]},"metadata":{},"sourceType":"module"}