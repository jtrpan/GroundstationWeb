{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\James Pan\\\\Desktop\\\\demo\\\\groundstationweb\\\\src\\\\components\\\\CommunicationArea\\\\index.jsx\";\nimport React, { Component } from 'react';\nimport { Segment, Header, Icon, Button } from \"semantic-ui-react\"; // eslint-disable-next-line no-unused-vars\n\nconst localServer = \"ws://localhost:8888\";\nconst remoteServer = \"ws://104.248.73.89:8888\"; // ?????\n\nconst server = remoteServer;\n\nclass CommunicationArea extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      connected: false\n    };\n\n    this.receivedData = data => {\n      console.info(\"received:\", data);\n      this.props.receiveData(data);\n    };\n\n    this.connect = () => {\n      console.info(\"Connecting....\");\n      const connection = new WebSocket(server);\n\n      connection.onopen = () => {\n        this.setState({\n          connected: true\n        });\n        console.info(\"Connected to server\");\n      };\n\n      connection.onerror = error => {\n        console.info(\"Connection error\", error);\n      };\n\n      connection.onmessage = e => {\n        this.receivedData(e.data);\n      };\n\n      connection.onclose = () => {\n        this.setState({\n          connected: false\n        });\n        console.info(\"Disconnected from server\");\n      };\n\n      this.connection = connection;\n    };\n\n    this.sendData = () => {\n      const connected = this.state.connected;\n\n      if (!connected) {\n        console.warn(\"Cannot send. Not connected\");\n        return;\n      }\n\n      const data = JSON.stringify({\n        type: \"data\",\n        flightData: {\n          latitude: 49.258063 + Math.random() * 0.00111,\n          longitude: -123.195911 + Math.random() * 0.00111,\n          altitude: 45.3,\n          velocity: 10.3,\n          headwind: -0.9\n        }\n      });\n      console.info(\"Sending:\", data);\n      this.connection.send(data);\n    };\n\n    this.ping = () => {\n      const connected = this.state.connected;\n\n      if (!connected) {\n        console.warn(\"Cannot ping. Not connected\");\n        return;\n      }\n\n      const message = JSON.stringify({\n        type: \"action\",\n        flightData: {\n          latitude: 49.258063 + Math.random() * 0.00111,\n          longitude: -123.195911 + Math.random() * 0.00111,\n          altitude: 45.3,\n          velocity: 10.3,\n          headwind: -0.9\n        }\n      });\n      console.info(\"Sending:\", message);\n      this.connection.send(message);\n    };\n\n    this.connect();\n  }\n\n  render() {\n    const connected = this.state.connected;\n    return React.createElement(Segment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(Header, {\n      as: \"h5\",\n      style: {\n        marginBottom: \"0px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Communication:\"), React.createElement(\"div\", {\n      style: {\n        color: \"grey\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Connection status:\\xA0\", connected ? React.createElement(\"strong\", {\n      style: {\n        color: \"limegreen\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Connected\") : React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      style: {\n        color: \"firebrick\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Not Connected\"), \"\\xA0\", React.createElement(Icon, {\n      link: true,\n      name: \"sync\",\n      onClick: this.connect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })), React.createElement(Button, {\n      icon: \"wifi\",\n      content: \"Ping Aircraft\",\n      fluid: true,\n      basic: true,\n      onClick: this.ping,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(Button, {\n      icon: \"send\",\n      content: \"Send Test Data\",\n      fluid: true,\n      basic: true,\n      onClick: this.sendData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default CommunicationArea;","map":{"version":3,"sources":["C:/Users/James Pan/Desktop/demo/groundstationweb/src/components/CommunicationArea/index.jsx"],"names":["React","Component","Segment","Header","Icon","Button","localServer","remoteServer","server","CommunicationArea","constructor","props","state","connected","receivedData","data","console","info","receiveData","connect","connection","WebSocket","onopen","setState","onerror","error","onmessage","e","onclose","sendData","warn","JSON","stringify","type","flightData","latitude","Math","random","longitude","altitude","velocity","headwind","send","ping","message","render","marginBottom","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Segment, Header, Icon, Button } from \"semantic-ui-react\";\r\n\r\n// eslint-disable-next-line no-unused-vars\r\nconst localServer = \"ws://localhost:8888\";\r\nconst remoteServer = \"ws://104.248.73.89:8888\";// ?????\r\nconst server = remoteServer;\r\n\r\nclass CommunicationArea extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.connect();\r\n  }\r\n\r\n  state = {\r\n    connected: false,\r\n  };\r\n\r\n  receivedData = (data) => {\r\n    console.info(\"received:\", data);\r\n    this.props.receiveData(data);\r\n  };\r\n\r\n  connect = () => {\r\n    console.info(\"Connecting....\");\r\n    const connection = new WebSocket(server);\r\n    connection.onopen = () => {\r\n      this.setState({ connected: true });\r\n      console.info(\"Connected to server\");\r\n    };\r\n    connection.onerror = (error) => {\r\n      console.info(\"Connection error\", error);\r\n    };\r\n    connection.onmessage = (e) => {\r\n      this.receivedData(e.data);\r\n    };\r\n    connection.onclose = () => {\r\n      this.setState({ connected: false });\r\n      console.info(\"Disconnected from server\");\r\n    };\r\n    this.connection = connection;\r\n  };\r\n\r\n  sendData = () => {\r\n    const { connected } = this.state;\r\n    if (!connected) {\r\n      console.warn(\"Cannot send. Not connected\");\r\n      return;\r\n    }\r\n    const data = JSON.stringify(\r\n      {\r\n        type: \"data\",\r\n        flightData: {\r\n          latitude: 49.258063+Math.random()*0.00111,\r\n          longitude: -123.195911+Math.random()*0.00111,\r\n          altitude: 45.3,\r\n          velocity: 10.3,\r\n          headwind: -0.9,\r\n        },\r\n      },\r\n    );\r\n    console.info(\"Sending:\", data);\r\n    this.connection.send(data);\r\n  };\r\n\r\n  ping = () => {\r\n    const { connected } = this.state;\r\n    if (!connected) {\r\n      console.warn(\"Cannot ping. Not connected\");\r\n      return;\r\n    }\r\n    const message = JSON.stringify(\r\n      {\r\n        type: \"action\",\r\n        flightData: {\r\n          latitude: 49.258063+Math.random()*0.00111,\r\n          longitude: -123.195911+Math.random()*0.00111,\r\n          altitude: 45.3,\r\n          velocity: 10.3,\r\n          headwind: -0.9,\r\n        },\r\n      },\r\n    );\r\n    console.info(\"Sending:\", message);\r\n    this.connection.send(message);\r\n  };\r\n\r\n  render() {\r\n    const { connected } = this.state;\r\n    return (\r\n      <Segment>\r\n        <Header as=\"h5\" style={{ marginBottom: \"0px\" }}>Communication:</Header>\r\n        <div style={{ color: \"grey\" }}>\r\n            Connection status:&nbsp;\r\n          {connected ? (\r\n            <strong style={{ color: \"limegreen\" }}>Connected</strong>\r\n          ): (\r\n            <span>\r\n              <strong style={{ color: \"firebrick\" }}>Not Connected</strong>\r\n                  &nbsp;\r\n              <Icon link name=\"sync\" onClick={this.connect} />\r\n            </span>\r\n\r\n          )}\r\n          <Button icon=\"wifi\" content=\"Ping Aircraft\" fluid basic onClick={this.ping} />\r\n          <Button icon=\"send\" content=\"Send Test Data\" fluid basic onClick={this.sendData} />\r\n        </div>\r\n      </Segment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CommunicationArea;\r\n"]},"metadata":{},"sourceType":"module"}